â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         DATA FLOW DIAGRAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This explains how data flows through the system during testing.


CURRENT SETUP (Testing Phase)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. YOU edit easy_test.py                                           â”‚
â”‚                                                                     â”‚
â”‚     TEST_SIMULATION = "fractions"      â† You type this             â”‚
â”‚     TEST_LEVEL = "Beginner"            â† You type this             â”‚
â”‚     TEST_CALIBRE = "Medium"            â† You type this             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    You run: python easy_test.py
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Test file creates initial state                                 â”‚
â”‚                                                                     â”‚
â”‚     state = {                                                       â”‚
â”‚         "simulation_name": "fractions",     â† From your input      â”‚
â”‚         "learner_profile": {                                       â”‚
â”‚             "level": "Beginner",            â† From your input      â”‚
â”‚             "calibre": "Medium"             â† From your input      â”‚
â”‚         },                                                          â”‚
â”‚         "simulation_url": "",               â† Empty, will be filled â”‚
â”‚         "control_mode": "MANUAL",           â† Empty, will be filled â”‚
â”‚         "concepts": [],                     â† Empty, will be filled â”‚
â”‚         # ... other empty fields                                   â”‚
â”‚     }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    Passes state to backend
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. simulation_ingest_node() processes state                        â”‚
â”‚     (backend/nodes/ingestion.py)                                    â”‚
â”‚                                                                     â”‚
â”‚     â€¢ Reads: simulation_name = "fractions"                          â”‚
â”‚     â€¢ Reads: learner_profile = {level: "Beginner", ...}            â”‚
â”‚     â€¢ Validates: Are these values present? âœ“                        â”‚
â”‚     â€¢ Fetches: URL from config.py                                   â”‚
â”‚     â€¢ Determines: Control mode from config.py                       â”‚
â”‚     â€¢ Creates: view_config based on mode                            â”‚
â”‚     â€¢ Returns: Updated state fields                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    Returns result dictionary
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Test file displays results                                      â”‚
â”‚                                                                     â”‚
â”‚     âœ… Ingestion Complete!                                          â”‚
â”‚        â€¢ Loaded simulation: fractions                               â”‚
â”‚        â€¢ URL: ../SimulationsNCERT-main/.../fractions.html          â”‚
â”‚        â€¢ Control mode: MANUAL                                       â”‚
â”‚        â€¢ Can agent modify params: False                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


WHAT EACH FILE DOES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ backend/
â”‚
â”œâ”€â”€ ğŸ§ª easy_test.py                    â† THE ONLY TEST FILE YOU NEED
â”‚   â”‚
â”‚   â”œâ”€ YOU edit lines 18-20           (simulation, level, calibre)
â”‚   â”œâ”€ Creates initial state          (with your values)
â”‚   â”œâ”€ Calls ingestion_node()         (passes state)
â”‚   â””â”€ Shows results                  (prints output)
â”‚
â”œâ”€â”€ ğŸ“‹ state.py                        â† Defines what "state" looks like
â”‚   â”‚
â”‚   â””â”€ TeachingState TypedDict        (structure of all data)
â”‚
â”œâ”€â”€ âš™ï¸  config.py                       â† Configuration settings
â”‚   â”‚
â”‚   â”œâ”€ SIMULATION_CONTROL_MODE        (MANUAL or AUTO)
â”‚   â”œâ”€ SIMULATION_URLS                (maps names to file paths)
â”‚   â””â”€ Helper functions               (get_simulation_url, etc.)
â”‚
â””â”€â”€ ğŸ“‚ nodes/
    â”‚
    â””â”€â”€ ingestion.py                   â† Backend logic
        â”‚
        â”œâ”€ simulation_ingest_node()    (validates & enriches state)
        â”œâ”€ simulation_parser_node()    (not implemented yet)
        â””â”€ concept_extractor_node()    (not implemented yet)


DATA FLOW IN DETAIL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Step 1: Input (YOU)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Location: easy_test.py (lines 18-20)
Action: You edit these values
Data: 
  - TEST_SIMULATION = "fractions"
  - TEST_LEVEL = "Beginner"  
  - TEST_CALIBRE = "Medium"


Step 2: State Creation (TEST FILE)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Location: easy_test.py (lines 38-53)
Action: Test file creates state dictionary
Data:
  state = {
    "simulation_name": "fractions",      â† From your TEST_SIMULATION
    "learner_profile": {
      "level": "Beginner",               â† From your TEST_LEVEL
      "calibre": "Medium"                â† From your TEST_CALIBRE
    },
    "simulation_url": "",                â† Empty (will be filled)
    "control_mode": "MANUAL",            â† Empty (will be filled)
    "concepts": [],                      â† Empty (will be filled)
    # ... many other empty fields
  }


Step 3: Node Execution (BACKEND)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Location: nodes/ingestion.py
Action: simulation_ingest_node() processes state
Process:

  3a. Read inputs from state
      sim_name = state.get("simulation_name")  â†’ "fractions"
      learner = state.get("learner_profile")   â†’ {level: "Beginner", ...}
  
  3b. Validate inputs
      if not sim_name: raise error  â†’ âœ“ OK, has value
      if not learner: raise error   â†’ âœ“ OK, has value
  
  3c. Fetch simulation URL
      url = config.get_simulation_url("fractions")
      â†’ "../SimulationsNCERT-main/.../fractions.html"
  
  3d. Determine control mode
      mode = config.SIMULATION_CONTROL_MODE  â†’ "MANUAL"
      mode_config = config.get_current_mode_config()
      â†’ {can_modify_params: False, requires_instructions: True, ...}
  
  3e. Create view_config
      view_config = {
        "mode": "MANUAL",
        "url": "../SimulationsNCERT-main/.../fractions.html",
        "can_modify_params": False,
        "current_params": {}
      }
  
  3f. Return updated fields
      return {
        "simulation_name": "fractions",
        "simulation_url": "../SimulationsNCERT-main/.../fractions.html",
        "control_mode": "MANUAL",
        "view_config": {...},
        "concepts": [],
        "current_concept_index": 0,
        # ... more fields
      }


Step 4: Display Results (TEST FILE)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Location: easy_test.py (lines 58-63)
Action: Print the results
Output:
  âœ… Ingestion Complete!
     â€¢ Loaded simulation: fractions
     â€¢ URL: ../SimulationsNCERT-main/.../fractions.html
     â€¢ Control mode: MANUAL
     â€¢ Can agent modify params: False


KEY CONCEPTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. INPUT vs VALIDATION
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   INPUT:      Test file collects your values (lines 18-20)
   VALIDATION: Backend checks if values are valid (ingestion.py)
   
   Test file = Simulates what Streamlit UI will do in Phase 5
   Backend = Pure logic, doesn't know where inputs came from


2. STATE = All Data
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   State is a big dictionary with ALL information needed for teaching
   
   Initial state:  Mostly empty, just has simulation name & learner profile
   After ingestion: Has URL, control mode, view_config filled in
   After parsing:  Has parameters filled in
   After concepts: Has concepts list filled in
   ... and so on


3. NODES = Processing Steps
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Each node:
   - Receives state (with some fields filled)
   - Does ONE specific job
   - Returns updated fields
   - State gets merged with updates
   
   Think of it like an assembly line:
   State â†’ Node1 â†’ State' â†’ Node2 â†’ State'' â†’ ...


4. TEST FILE = User Simulator
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Right now:     You manually edit values
   Phase 5:       Streamlit UI collects values from user clicks
   But backend:   Doesn't change! Same validation logic


HOW TO USE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Want to test a different student?
   â†’ Edit easy_test.py lines 18-20
   â†’ Run: python easy_test.py

2. Want to test different control mode?
   â†’ Edit config.py line 11 (SIMULATION_CONTROL_MODE)
   â†’ Run: python easy_test.py

3. Want to see available simulations?
   â†’ Look at config.py SIMULATION_URLS dictionary
   â†’ Or look at easy_test.py comments (lines 24-30)

4. Confused about what a field means?
   â†’ Look at state.py for all field definitions


SIMPLE MENTAL MODEL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Think of it like ordering food:

YOU (Customer):        Edit easy_test.py with your order
                       â†“
MENU:                  config.py has available items
                       â†“
ORDER FORM:            state.py defines what info is needed
                       â†“
WAITER:                easy_test.py takes your order
                       â†“
KITCHEN:               ingestion_node() validates order
                       â†“
RESULT:                You get confirmation of your order

The kitchen (backend) doesn't care if order came from a waiter (test)
or from a tablet (Streamlit UI). It just validates and processes!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILES YOU INTERACT WITH:
  â€¢ easy_test.py    â†’ Edit lines 18-20, then run it
  â€¢ config.py       â†’ Change control mode (optional)

FILES YOU DON'T EDIT:
  â€¢ state.py        â†’ Just defines structure
  â€¢ ingestion.py    â†’ Backend logic (already done)

THAT'S IT! Keep it simple. One test file, three values to edit.
